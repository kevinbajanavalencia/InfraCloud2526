<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Map</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<header class="header">
    <h1>Live Location Map</h1>
</header>

<main class="container">
    <div id="map" class="map-box"></div>

    <div class="card">
        <strong>Coordinates:</strong> <span id="coords">Locating...</span>
    </div>

    <div class="buttons">
        <a href="{{ url_for('main') }}" class="btn">Back Home</a>
    </div>
</main>

<script>
function showMap(lat, lon) {
    document.getElementById("map").innerHTML =
        `<iframe width="100%" height="100%" 
        src="https://www.google.com/maps?q=${lat},${lon}&output=embed"></iframe>`;
}

navigator.geolocation.getCurrentPosition(
    (pos) => {
        const lat = pos.coords.latitude;
        const lon = pos.coords.longitude;
        document.getElementById("coords").textContent = `${lat}, ${lon}`;
        showMap(lat, lon);
    },
    () => {
        document.getElementById("coords").textContent = "Permission denied";
    }
);
</script>

</body>
</html>
